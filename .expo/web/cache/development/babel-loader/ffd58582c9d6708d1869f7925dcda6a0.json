{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState, useContext } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { Item, Picker, Toast } from 'native-base';\nimport Icon from \"@expo/vector-icons/FontAwesome\";\nimport FormContainer from \"../../../Shared/Form/FormContainer\";\nimport Input from \"../../../Shared/Form/Input\";\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scroll-view';\nimport AuthGlobal from \"../../../Context/store/AuthGlobal\";\nimport { connect } from 'react-redux';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar countries = require(\"../../../assets/countries.json\");\n\nvar Checkout = function Checkout(props) {\n  var context = useContext(AuthGlobal);\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      orderItems = _useState2[0],\n      setOrderItems = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      address = _useState4[0],\n      setAddress = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      address2 = _useState6[0],\n      setAddress2 = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      city = _useState8[0],\n      setCity = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      zip = _useState10[0],\n      setZip = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      country = _useState12[0],\n      setCountry = _useState12[1];\n\n  var _useState13 = useState(),\n      _useState14 = _slicedToArray(_useState13, 2),\n      phone = _useState14[0],\n      setPhone = _useState14[1];\n\n  var _useState15 = useState(),\n      _useState16 = _slicedToArray(_useState15, 2),\n      user = _useState16[0],\n      setUser = _useState16[1];\n\n  useEffect(function () {\n    setOrderItems(props.cartItems);\n\n    if (context.stateUser.isAuthenticated) {\n      setUser(context.stateUser.user.sub);\n    } else {\n      props.navigation.navigate(\"Cart\");\n      Toast.show({\n        topOffset: 60,\n        type: \"error\",\n        text1: \"Please Login to Checkout\",\n        text2: \"\"\n      });\n    }\n\n    return function () {\n      setOrderItems();\n    };\n  }, []);\n\n  var checkOut = function checkOut() {\n    console.log(\"orders\", orderItems);\n    var order = {\n      city: city,\n      country: country,\n      dateOrdered: Date.now(),\n      orderItems: orderItems,\n      phone: phone,\n      shippingAddress1: address,\n      shippingAddress2: address2,\n      status: \"3\",\n      user: user,\n      zip: zip\n    };\n    props.navigation.navigate(\"Payment\", {\n      order: order\n    });\n  };\n\n  return _jsx(KeyboardAwareScrollView, {\n    viewIsInsideTabBar: true,\n    extraHeight: 200,\n    enableOnAndroid: true,\n    children: _jsxs(FormContainer, {\n      title: \"Shipping Address\",\n      children: [_jsx(Input, {\n        placeholder: \"Phone\",\n        name: \"phone\",\n        value: phone,\n        keyboardType: \"numeric\",\n        onChangeText: function onChangeText(text) {\n          return setPhone(text);\n        }\n      }), _jsx(Input, {\n        placeholder: \"Shipping Address 1\",\n        name: \"ShippingAddress1\",\n        value: address,\n        onChangeText: function onChangeText(text) {\n          return setAddress(text);\n        }\n      }), _jsx(Input, {\n        placeholder: \"Shipping Address 2\",\n        name: \"ShippingAddress2\",\n        value: address2,\n        onChangeText: function onChangeText(text) {\n          return setAddress2(text);\n        }\n      }), _jsx(Input, {\n        placeholder: \"City\",\n        name: \"city\",\n        value: city,\n        onChangeText: function onChangeText(text) {\n          return setCity(text);\n        }\n      }), _jsx(Input, {\n        placeholder: \"Zip Code\",\n        name: \"zip\",\n        value: zip,\n        keyboardType: \"numeric\",\n        onChangeText: function onChangeText(text) {\n          return setZip(text);\n        }\n      }), _jsx(Item, {\n        picker: true,\n        children: _jsx(Picker, {\n          mode: \"dropdown\",\n          iosIcon: _jsx(Icon, {\n            name: \"arrow-down\",\n            color: \"#007aff\"\n          }),\n          style: {\n            width: undefined\n          },\n          selectedValue: country,\n          placeholder: \"Select your country\",\n          placeholderStyle: {\n            color: '#007aff'\n          },\n          placeholderIconColor: \"#007aff\",\n          onValueChange: function onValueChange(e) {\n            return setCountry(e);\n          },\n          children: countries.map(function (c) {\n            return _jsx(Picker.Item, {\n              label: c.name,\n              value: c.name\n            }, c.code);\n          })\n        })\n      }), _jsx(View, {\n        style: {\n          width: '80%',\n          alignItems: \"center\"\n        },\n        children: _jsx(Button, {\n          title: \"Confirm\",\n          onPress: function onPress() {\n            return checkOut();\n          }\n        })\n      })]\n    })\n  });\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var cartItems = state.cartItems;\n  return {\n    cartItems: cartItems\n  };\n};\n\nexport default connect(mapStateToProps)(Checkout);","map":{"version":3,"sources":["/home/theo/Bureau/react/QAM_U/qam/Screens/Cart/Checkout/Checkout.js"],"names":["React","useEffect","useState","useContext","Item","Picker","Toast","Icon","FormContainer","Input","KeyboardAwareScrollView","AuthGlobal","connect","countries","require","Checkout","props","context","orderItems","setOrderItems","address","setAddress","address2","setAddress2","city","setCity","zip","setZip","country","setCountry","phone","setPhone","user","setUser","cartItems","stateUser","isAuthenticated","sub","navigation","navigate","show","topOffset","type","text1","text2","checkOut","console","log","order","dateOrdered","Date","now","shippingAddress1","shippingAddress2","status","text","width","undefined","color","e","map","c","name","code","alignItems","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext} from 'react'\nimport { Text, View, Button } from 'react-native'\nimport { Item, Picker, Toast } from 'native-base'\nimport Icon from 'react-native-vector-icons/FontAwesome'\nimport FormContainer from '../../../Shared/Form/FormContainer'\nimport Input from '../../../Shared/Form/Input'\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scroll-view'\nimport AuthGlobal from \"../../../Context/store/AuthGlobal\"\n\nimport { connect } from 'react-redux'\n\nconst countries = require(\"../../../assets/countries.json\");\n\nconst Checkout = (props) => {\n    const context = useContext(AuthGlobal)\n\n    const [ orderItems, setOrderItems ] = useState();\n    const [ address, setAddress ] = useState();\n    const [ address2, setAddress2 ] = useState();\n    const [ city, setCity ] = useState();\n    const [ zip, setZip ] = useState();\n    const [ country, setCountry ] = useState();\n    const [ phone, setPhone ] = useState();\n    const [ user, setUser ] = useState();\n\n    useEffect(() => {\n        setOrderItems(props.cartItems)\n\n        if(context.stateUser.isAuthenticated) {\n            setUser(context.stateUser.user.sub)\n        } else {\n            props.navigation.navigate(\"Cart\");\n            Toast.show({\n                topOffset: 60,\n                type: \"error\",\n                text1: \"Please Login to Checkout\",\n                text2: \"\"\n            });\n        }\n\n        return () => {\n            setOrderItems();\n        }\n    }, [])\n\n    const checkOut = () => {\n        console.log(\"orders\", orderItems)\n        let order = {\n            city,\n            country,\n            dateOrdered: Date.now(),\n            orderItems,\n            phone,\n            shippingAddress1: address,\n            shippingAddress2: address2,\n            status: \"3\",\n            user,\n            zip,\n        }\n\n        props.navigation.navigate(\"Payment\", {order: order })\n    }\n\n    return (\n        <KeyboardAwareScrollView\n            viewIsInsideTabBar={true}\n            extraHeight={200}\n            enableOnAndroid={true}\n        >\n            <FormContainer title={\"Shipping Address\"}>\n                <Input\n                    placeholder={\"Phone\"}\n                    name={\"phone\"}\n                    value={phone}\n                    keyboardType={\"numeric\"}\n                    onChangeText={(text) => setPhone(text)}\n                />\n                   <Input\n                    placeholder={\"Shipping Address 1\"}\n                    name={\"ShippingAddress1\"}\n                    value={address}\n                    onChangeText={(text) => setAddress(text)}\n                />\n                   <Input\n                    placeholder={\"Shipping Address 2\"}\n                    name={\"ShippingAddress2\"}\n                    value={address2}\n                    onChangeText={(text) => setAddress2(text)}\n                />\n                   <Input\n                    placeholder={\"City\"}\n                    name={\"city\"}\n                    value={city}\n                    onChangeText={(text) => setCity(text)}\n                />\n                   <Input\n                    placeholder={\"Zip Code\"}\n                    name={\"zip\"}\n                    value={zip}\n                    keyboardType={\"numeric\"}\n                    onChangeText={(text) => setZip(text)}\n                />\n                <Item picker>\n                    <Picker\n                        mode=\"dropdown\"\n                        iosIcon={<Icon name=\"arrow-down\" color={\"#007aff\"} />}\n                        style={{ width: undefined }}\n                        selectedValue={country}\n                        placeholder=\"Select your country\"\n                        placeholderStyle={{ color: '#007aff' }}\n                        placeholderIconColor=\"#007aff\"\n                        onValueChange={(e) => setCountry(e)}\n                    >\n                        {countries.map((c) => {\n                            return <Picker.Item \n                                    key={c.code} \n                                    label={c.name}\n                                    value={c.name}\n                                    />\n                        })}\n                    </Picker>\n                </Item>\n                <View style={{ width: '80%', alignItems: \"center\" }}>\n                    <Button title=\"Confirm\" onPress={() => checkOut()}/>\n                </View>\n            </FormContainer>\n        </KeyboardAwareScrollView>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    const { cartItems } = state;\n    return {\n        cartItems: cartItems,\n    }\n}\n\nexport default connect(mapStateToProps)(Checkout)"]},"metadata":{},"sourceType":"module"}