{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { Item, Picker } from \"native-base\";\nimport FormContainer from \"../../Shared/Form/FormContainer\";\nimport Input from \"../../Shared/Form/Input\";\nimport EasyButton from \"../../Shared/StyledComponents/EasyButton\";\nimport Error from \"../../Shared/Error\";\nimport Icon from \"@expo/vector-icons/FontAwesome\";\nimport Toast from \"react-native-toast-message\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport baseURL from \"../../assets/common/baseUrl\";\nimport axios from \"axios\";\nimport * as imagePicker from \"expo-image-picker\";\nimport mime from \"mime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar ProductForm = function ProductForm(props) {\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      pickerValue = _useState2[0],\n      setPickerValue = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      brand = _useState4[0],\n      setBrand = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      name = _useState6[0],\n      setName = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      price = _useState8[0],\n      setPrice = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      description = _useState10[0],\n      setDescription = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      image = _useState12[0],\n      setImage = _useState12[1];\n\n  var _useState13 = useState(),\n      _useState14 = _slicedToArray(_useState13, 2),\n      mainImage = _useState14[0],\n      setMainImage = _useState14[1];\n\n  var _useState15 = useState(),\n      _useState16 = _slicedToArray(_useState15, 2),\n      category = _useState16[0],\n      setCategory = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      categories = _useState18[0],\n      setCategories = _useState18[1];\n\n  var _useState19 = useState(),\n      _useState20 = _slicedToArray(_useState19, 2),\n      token = _useState20[0],\n      setToken = _useState20[1];\n\n  var _useState21 = useState(),\n      _useState22 = _slicedToArray(_useState21, 2),\n      err = _useState22[0],\n      setError = _useState22[1];\n\n  var _useState23 = useState(),\n      _useState24 = _slicedToArray(_useState23, 2),\n      countInStock = _useState24[0],\n      setCountInStock = _useState24[1];\n\n  var _useState25 = useState(),\n      _useState26 = _slicedToArray(_useState25, 2),\n      rating = _useState26[0],\n      setRating = _useState26[1];\n\n  var _useState27 = useState(false),\n      _useState28 = _slicedToArray(_useState27, 2),\n      isFeatured = _useState28[0],\n      setIsFeatured = _useState28[1];\n\n  var _useState29 = useState(),\n      _useState30 = _slicedToArray(_useState29, 2),\n      richDescription = _useState30[0],\n      setRichDescription = _useState30[1];\n\n  var _useState31 = useState(),\n      _useState32 = _slicedToArray(_useState31, 2),\n      numReviews = _useState32[0],\n      setNumReviews = _useState32[1];\n\n  var _useState33 = useState(null),\n      _useState34 = _slicedToArray(_useState33, 2),\n      item = _useState34[0],\n      setItem = _useState34[1];\n\n  useEffect(function () {\n    AsyncStorage.getItem(\"jwt\").then(function (res) {\n      setToken(res);\n    }).catch(function (error) {\n      return console.log(error);\n    });\n    axios.get(baseURL + \"categories\").then(function (res) {\n      return setCategories(res.data);\n    }).catch(function (error) {\n      return alert(\"Error to load categories\");\n    });\n\n    (function _callee() {\n      var _await$imagePicker$re, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(Platform.OS !== \"web\")) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(imagePicker.requestCameraPermissionsAsync());\n\n            case 3:\n              _await$imagePicker$re = _context.sent;\n              status = _await$imagePicker$re.status;\n\n              if (status !== \"granted\") {\n                alert(\"Sorry we need camera roll permissions to make this work!\");\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n\n    return function () {\n      setCategories([]);\n    };\n  }, []);\n\n  var pickImage = function pickImage() {\n    var result;\n    return _regeneratorRuntime.async(function pickImage$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(imagePicker.launchImageLibraryAsync({\n              mediaTypes: imagePicker.MediaTypeOptions.All,\n              allowsEditing: true,\n              aspect: [4, 3],\n              quality: 1\n            }));\n\n          case 2:\n            result = _context2.sent;\n\n            if (!result.cancelled) {\n              setMainImage(result.uri);\n              setImage(result.uri);\n            }\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var addProduct = function addProduct() {\n    if (name == \"\" || brand == \"\" || price == \"\" || description == \"\" || category == \"\" || countInStock == \"\") {\n      setError(\"Please fill in the form correctly\");\n    }\n\n    var formData = new FormData();\n    var newImageUri = \"file:///\" + image.split(\"file:/\").join(\"\");\n    formData.append(\"image\", {\n      uri: newImageUri,\n      type: mime.getType(newImageUri),\n      name: newImageUri.split(\"/\").pop()\n    });\n    formData.append(\"name\", name);\n    formData.append(\"brand\", brand);\n    formData.append(\"price\", price);\n    formData.append(\"description\", description);\n    formData.append(\"category\", category);\n    formData.append(\"countInStock\", countInStock);\n    formData.append(\"richDescription\", richDescription);\n    formData.append(\"rating\", rating);\n    formData.append(\"numReviews\", numReviews);\n    formData.append(\"isFeatured\", isFeatured);\n    var config = {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n        Authorization: \"Bearer \" + token\n      }\n    };\n    axios.post(baseURL + \"products\", formData, config).then(function (res) {\n      if (res.status == 200 || res.status == 201) {\n        Toast.show({\n          topOffset: 60,\n          type: \"success\",\n          text1: \"New Product added\",\n          text2: \"\"\n        });\n        setTimeout(function () {\n          props.navigation.navigate(\"Products\");\n        }, 500);\n      }\n    }).catch(function (error) {\n      Toast.show({\n        topOffset: 60,\n        type: \"error\",\n        text1: \"Something went worng\",\n        text2: \"Please try again\"\n      });\n    });\n  };\n\n  return _jsxs(FormContainer, {\n    title: \"Add Product\",\n    children: [_jsxs(View, {\n      style: styles.imageContainer,\n      children: [_jsx(Image, {\n        style: styles.image,\n        source: {\n          uri: mainImage\n        }\n      }), _jsx(TouchableOpacity, {\n        onPress: pickImage,\n        style: styles.imagePicker,\n        children: _jsx(Icon, {\n          style: {\n            color: \"white\"\n          },\n          name: \"camera\"\n        })\n      })]\n    }), _jsx(View, {\n      style: styles.label,\n      children: _jsx(Text, {\n        style: {\n          textDecorationLine: \"underline\"\n        },\n        children: \"Brand\"\n      })\n    }), _jsx(Input, {\n      placeholder: \"Brand\",\n      name: \"brand\",\n      id: \"brand\",\n      value: brand,\n      onChangeText: function onChangeText(text) {\n        return setBrand(text);\n      }\n    }), _jsx(View, {\n      style: styles.label,\n      children: _jsx(Text, {\n        style: {\n          textDecorationLine: \"underline\"\n        },\n        children: \"Name\"\n      })\n    }), _jsx(Input, {\n      placeholder: \"Name\",\n      name: \"name\",\n      id: \"name\",\n      value: name,\n      onChangeText: function onChangeText(text) {\n        return setName(text);\n      }\n    }), _jsx(View, {\n      style: styles.label,\n      children: _jsx(Text, {\n        style: {\n          textDecorationLine: \"underline\"\n        },\n        children: \"Price\"\n      })\n    }), _jsx(Input, {\n      placeholder: \"Price\",\n      name: \"price\",\n      id: \"price\",\n      value: price,\n      keyboardType: \"numeric\",\n      onChangeText: function onChangeText(text) {\n        return setPrice(text);\n      }\n    }), _jsx(View, {\n      style: styles.label,\n      children: _jsx(Text, {\n        style: {\n          textDecorationLine: \"underline\"\n        },\n        children: \"Stock\"\n      })\n    }), _jsx(Input, {\n      placeholder: \"Stock\",\n      name: \"stock\",\n      id: \"stock\",\n      value: countInStock,\n      keyboardType: \"numeric\",\n      onChangeText: function onChangeText(text) {\n        return setCountInStock(text);\n      }\n    }), _jsx(View, {\n      style: styles.label,\n      children: _jsx(Text, {\n        style: {\n          textDecorationLine: \"underline\"\n        },\n        children: \"Description\"\n      })\n    }), _jsx(Input, {\n      placeholder: \"Description\",\n      name: \"description\",\n      id: \"description\",\n      value: description,\n      onChangeText: function onChangeText(text) {\n        return setDescription(text);\n      }\n    }), _jsx(Item, {\n      picker: true,\n      children: _jsx(Picker, {\n        mode: \"dropdown\",\n        iosIcon: _jsx(Icon, {\n          color: \"#007aff\",\n          name: \"arrow-down\"\n        }),\n        style: {\n          width: undefined\n        },\n        placeholder: \"Select your Category\",\n        selectedValue: pickerValue,\n        placeholderStyle: {\n          color: \"#007aff\"\n        },\n        placeholderIconColor: \"#007aff\",\n        onValueChange: function onValueChange(e) {\n          return [setPickerValue(e), setCategory(e)];\n        },\n        children: categories.map(function (c) {\n          return _jsx(Picker.Item, {\n            label: c.name,\n            value: c.name\n          }, c.id);\n        })\n      })\n    }), err ? _jsx(Error, {\n      message: err\n    }) : null, _jsx(View, {\n      style: styles.buttonContainer,\n      children: _jsx(EasyButton, {\n        large: true,\n        primary: true,\n        onPress: function onPress() {\n          return addProduct();\n        },\n        children: _jsx(Text, {\n          style: styles.buttonText,\n          children: \"Confirm\"\n        })\n      })\n    })]\n  });\n};\n\nvar styles = StyleSheet.create({\n  label: {\n    width: \"80%\",\n    marginTop: 10\n  },\n  buttonContainer: {\n    width: \"80%\",\n    marginBottom: 80,\n    marginTop: 20,\n    alignItems: \"center\"\n  },\n  buttonText: {\n    color: \"white\"\n  },\n  imageContainer: {\n    width: 200,\n    height: 200,\n    borderStyle: \"solid\",\n    borderWidth: 8,\n    padding: 0,\n    justifyContent: \"center\",\n    borderRadius: 100,\n    borderColor: \"#E0E0E0\",\n    elevation: 10\n  },\n  image: {\n    width: \"100%\",\n    height: \"100%\",\n    borderRadius: 100\n  },\n  imagePicker: {\n    position: \"absolute\",\n    right: 5,\n    bottom: 5,\n    backgroundColor: \"gray\",\n    padding: 8,\n    borderRadius: 100,\n    elevation: 20\n  }\n});\nexport default ProductForm;","map":{"version":3,"sources":["/home/theo/Bureau/react/QAM_U/qam/Screens/User/ProductForm.js"],"names":["React","useState","useEffect","Item","Picker","FormContainer","Input","EasyButton","Error","Icon","Toast","AsyncStorage","baseURL","axios","imagePicker","mime","ProductForm","props","pickerValue","setPickerValue","brand","setBrand","name","setName","price","setPrice","description","setDescription","image","setImage","mainImage","setMainImage","category","setCategory","categories","setCategories","token","setToken","err","setError","countInStock","setCountInStock","rating","setRating","isFeatured","setIsFeatured","richDescription","setRichDescription","numReviews","setNumReviews","item","setItem","getItem","then","res","catch","error","console","log","get","data","alert","Platform","OS","requestCameraPermissionsAsync","status","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","result","cancelled","uri","addProduct","formData","FormData","newImageUri","split","join","append","type","getType","pop","config","headers","Authorization","post","show","topOffset","text1","text2","setTimeout","navigation","navigate","styles","imageContainer","color","label","textDecorationLine","text","width","undefined","e","map","c","id","buttonContainer","buttonText","StyleSheet","create","marginTop","marginBottom","alignItems","height","borderStyle","borderWidth","padding","justifyContent","borderRadius","borderColor","elevation","position","right","bottom","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  View,\n  Text,\n  Image,\n  StyleSheet,\n  TouchableOpacity,\n  Platform\n} from \"react-native\";\nimport { Item, Picker } from \"native-base\";\nimport FormContainer from \"../../Shared/Form/FormContainer\";\nimport Input from \"../../Shared/Form/Input\";\nimport EasyButton from \"../../Shared/StyledComponents/EasyButton\";\nimport Error from \"../../Shared/Error\";\nimport Icon from \"react-native-vector-icons/FontAwesome\";\nimport Toast from \"react-native-toast-message\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport baseURL from \"../../assets/common/baseUrl\";\nimport axios from \"axios\";\nimport * as imagePicker from \"expo-image-picker\";\nimport mime from \"mime\";\n \nconst ProductForm = (props) => {\n  const [pickerValue, setPickerValue] = useState();\n  const [brand, setBrand] = useState();\n  const [name, setName] = useState();\n  const [price, setPrice] = useState();\n  const [description, setDescription] = useState();\n  const [image, setImage] = useState();\n  const [mainImage, setMainImage] = useState();\n  const [category, setCategory] = useState();\n  const [categories, setCategories] = useState([]);\n  const [token, setToken] = useState();\n  const [err, setError] = useState();\n  const [countInStock, setCountInStock] = useState();\n  const [rating, setRating] = useState();\n  const [isFeatured, setIsFeatured] = useState(false);\n  const [richDescription, setRichDescription] = useState();\n  const [numReviews, setNumReviews] = useState();\n  const [item, setItem] = useState(null);\n \n  useEffect(() => {\n    AsyncStorage.getItem(\"jwt\")\n      .then((res) => {\n        setToken(res);\n      })\n      .catch((error) => console.log(error));\n \n    // Categories\n    axios\n      .get(`${baseURL}categories`)\n      .then((res) => setCategories(res.data))\n      .catch((error) => alert(\"Error to load categories\"));\n \n    // Image Picker\n    (async () => {\n      if (Platform.OS !== \"web\") {\n        const { status } = await imagePicker.requestCameraPermissionsAsync();\n        if (status !== \"granted\") {\n          alert(\"Sorry we need camera roll permissions to make this work!\");\n        }\n      }\n    })();\n \n    return () => {\n      setCategories([]);\n    };\n  }, []);\n \n  const pickImage = async () => {\n    let result = await imagePicker.launchImageLibraryAsync({\n      mediaTypes: imagePicker.MediaTypeOptions.All,\n      allowsEditing: true,\n      aspect: [4, 3],\n      quality: 1,\n    });\n \n    if (!result.cancelled) {\n      setMainImage(result.uri);\n      setImage(result.uri);\n    }\n  };\n \n  const addProduct = () => {\n    if (\n      name == \"\" ||\n      brand == \"\" ||\n      price == \"\" ||\n      description == \"\" ||\n      category == \"\" ||\n      countInStock == \"\"\n    ) {\n      setError(\"Please fill in the form correctly\");\n    }\n \n    let formData = new FormData();\n \n    const newImageUri = \"file:///\" + image.split(\"file:/\").join(\"\");\n \n    formData.append(\"image\", {\n      uri: newImageUri,\n      type: mime.getType(newImageUri),\n      name: newImageUri.split(\"/\").pop(),\n    });\n    formData.append(\"name\", name);\n    formData.append(\"brand\", brand);\n    formData.append(\"price\", price);\n    formData.append(\"description\", description);\n    formData.append(\"category\", category);\n    formData.append(\"countInStock\", countInStock);\n    formData.append(\"richDescription\", richDescription);\n    formData.append(\"rating\", rating);\n    formData.append(\"numReviews\", numReviews);\n    formData.append(\"isFeatured\", isFeatured);\n \n    const config = {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n        Authorization: `Bearer ${token}`,\n      },\n    };\n \n    axios\n      .post(`${baseURL}products`, formData, config)\n      .then((res) => {\n        if (res.status == 200 || res.status == 201) {\n          Toast.show({\n            topOffset: 60,\n            type: \"success\",\n            text1: \"New Product added\",\n            text2: \"\",\n          });\n          setTimeout(() => {\n            props.navigation.navigate(\"Products\");\n          }, 500);\n        }\n      })\n      .catch((error) => {\n        Toast.show({\n          topOffset: 60,\n          type: \"error\",\n          text1: \"Something went worng\",\n          text2: \"Please try again\",\n        });\n      });\n  };\n \n  return (\n    <FormContainer title=\"Add Product\">\n      <View style={styles.imageContainer}>\n        <Image style={styles.image} source={{ uri: mainImage }} />\n        <TouchableOpacity onPress={pickImage} style={styles.imagePicker}>\n          <Icon style={{ color: \"white\" }} name=\"camera\" />\n        </TouchableOpacity>\n      </View>\n      <View style={styles.label}>\n        <Text style={{ textDecorationLine: \"underline\" }}>Brand</Text>\n      </View>\n      <Input\n        placeholder=\"Brand\"\n        name=\"brand\"\n        id=\"brand\"\n        value={brand}\n        onChangeText={(text) => setBrand(text)}\n      />\n      <View style={styles.label}>\n        <Text style={{ textDecorationLine: \"underline\" }}>Name</Text>\n      </View>\n      <Input\n        placeholder=\"Name\"\n        name=\"name\"\n        id=\"name\"\n        value={name}\n        onChangeText={(text) => setName(text)}\n      />\n      <View style={styles.label}>\n        <Text style={{ textDecorationLine: \"underline\" }}>Price</Text>\n      </View>\n      <Input\n        placeholder=\"Price\"\n        name=\"price\"\n        id=\"price\"\n        value={price}\n        keyboardType={\"numeric\"}\n        onChangeText={(text) => setPrice(text)}\n      />\n      <View style={styles.label}>\n        <Text style={{ textDecorationLine: \"underline\" }}>Stock</Text>\n      </View>\n      <Input\n        placeholder=\"Stock\"\n        name=\"stock\"\n        id=\"stock\"\n        value={countInStock}\n        keyboardType={\"numeric\"}\n        onChangeText={(text) => setCountInStock(text)}\n      />\n      <View style={styles.label}>\n        <Text style={{ textDecorationLine: \"underline\" }}>Description</Text>\n      </View>\n      <Input\n        placeholder=\"Description\"\n        name=\"description\"\n        id=\"description\"\n        value={description}\n        onChangeText={(text) => setDescription(text)}\n      />\n      <Item picker>\n        <Picker\n          mode=\"dropdown\"\n          iosIcon={<Icon color={\"#007aff\"} name=\"arrow-down\" />}\n          style={{ width: undefined }}\n          placeholder=\"Select your Category\"\n          selectedValue={pickerValue}\n          placeholderStyle={{ color: \"#007aff\" }}\n          placeholderIconColor=\"#007aff\"\n          onValueChange={(e) => [setPickerValue(e), setCategory(e)]}\n        >\n          {categories.map((c) => {\n            return <Picker.Item key={c.id} label={c.name} value={c.name} />;\n          })}\n        </Picker>\n      </Item>\n      {err ? <Error message={err} /> : null}\n      <View style={styles.buttonContainer}>\n        <EasyButton large primary onPress={() => addProduct()}>\n          <Text style={styles.buttonText}>Confirm</Text>\n        </EasyButton>\n      </View>\n    </FormContainer>\n  );\n};\n \nconst styles = StyleSheet.create({\n  label: {\n    width: \"80%\",\n    marginTop: 10,\n  },\n  buttonContainer: {\n    width: \"80%\",\n    marginBottom: 80,\n    marginTop: 20,\n    alignItems: \"center\",\n  },\n  buttonText: {\n    color: \"white\",\n  },\n  imageContainer: {\n    width: 200,\n    height: 200,\n    borderStyle: \"solid\",\n    borderWidth: 8,\n    padding: 0,\n    justifyContent: \"center\",\n    borderRadius: 100,\n    borderColor: \"#E0E0E0\",\n    elevation: 10,\n  },\n  image: {\n    width: \"100%\",\n    height: \"100%\",\n    borderRadius: 100,\n  },\n  imagePicker: {\n    position: \"absolute\",\n    right: 5,\n    bottom: 5,\n    backgroundColor: \"gray\",\n    padding: 8,\n    borderRadius: 100,\n    elevation: 20,\n  },\n});\n \nexport default ProductForm;\n \n "]},"metadata":{},"sourceType":"module"}