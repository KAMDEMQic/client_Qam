{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport EasyButton from \"../../Shared/StyledComponents/EasyButton\";\nimport baseURL from \"../../assets/common/baseUrl\";\nimport axios from \"axios\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { add } from \"react-native-reanimated\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar _Dimensions$get = Dimensions.get(\"window\"),\n    width = _Dimensions$get.width;\n\nvar Item = function Item(props) {\n  return _jsxs(View, {\n    style: styles.item,\n    children: [_jsx(Text, {\n      children: props.item.name\n    }), _jsx(EasyButton, {\n      danger: true,\n      medium: true,\n      onPress: function onPress() {\n        return props.delete(props.item._id);\n      },\n      children: _jsx(Text, {\n        style: {\n          color: \"white\",\n          fontWeight: \"bold\"\n        },\n        children: \"Delete\"\n      })\n    })]\n  });\n};\n\nvar Categories = function Categories(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      categories = _useState2[0],\n      setCategories = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      categoryName = _useState4[0],\n      setCategoryName = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      token = _useState6[0],\n      setToken = _useState6[1];\n\n  useEffect(function () {\n    AsyncStorage.getItem(\"jwt\").then(function (res) {\n      setToken(res);\n    }).catch(function (error) {\n      return console.log(error);\n    });\n    axios.get(baseURL + \"categories\").then(function (res) {\n      return setCategories(res.data);\n    }).catch(function (error) {\n      return alert(\"Error to load categories\");\n    });\n    return function () {\n      setCategories();\n      setToken();\n    };\n  }, []);\n\n  var addCategory = function addCategory() {\n    var category = {\n      name: categoryName\n    };\n    var config = {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    };\n    axios.post(baseURL + \"categories\", category, config).then(function (res) {\n      return setCategories([].concat(_toConsumableArray(categories), [res.data]));\n    }).catch(function (error) {\n      return alert(\"Error to load categories\");\n    });\n    setCategoryName(\"\");\n  };\n\n  var deleteCategory = function deleteCategory(id) {\n    var config = {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    };\n    axios.delete(baseURL + \"categories/\" + id, config).then(function (res) {\n      var newCategories = categories.filter(function (item) {\n        return item.id !== id;\n      });\n      setCategories(newCategories);\n    }).catch(function (error) {\n      return alert(\"Error to load categories\");\n    });\n  };\n\n  return _jsxs(View, {\n    style: {\n      position: \"relative\",\n      height: \"100%\"\n    },\n    children: [_jsx(View, {\n      style: {\n        marginBottom: 60\n      },\n      children: _jsx(FlatList, {\n        data: categories,\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item,\n              index = _ref.index;\n          return _jsx(Item, {\n            item: item,\n            index: index,\n            delete: deleteCategory\n          });\n        },\n        keyExtractor: function keyExtractor(item) {\n          return item.id;\n        }\n      })\n    }), _jsxs(View, {\n      style: styles.bottomBar,\n      children: [_jsx(View, {\n        children: _jsx(Text, {\n          children: \"Add Category\"\n        })\n      }), _jsx(View, {\n        style: {\n          width: width / 2.5\n        },\n        children: _jsx(TextInput, {\n          value: categoryName,\n          style: styles.input,\n          onChangeText: function onChangeText(text) {\n            return setCategoryName(text);\n          }\n        })\n      }), _jsx(View, {\n        children: _jsx(EasyButton, {\n          medium: true,\n          primary: true,\n          onPress: function onPress() {\n            return addCategory();\n          },\n          children: _jsx(Text, {\n            style: {\n              color: \"white\",\n              fontWeight: \"bold\"\n            },\n            children: \"Submit\"\n          })\n        })\n      })]\n    })]\n  });\n};\n\nvar styles = StyleSheet.create({\n  bottomBar: {\n    backgroundColor: \"white\",\n    width: width,\n    height: 60,\n    padding: 2,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    position: \"absolute\",\n    bottom: 0,\n    left: 0\n  },\n  input: {\n    height: 40,\n    borderColor: \"gray\",\n    borderWidth: 1\n  },\n  item: {\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.2,\n    shadowRadius: 1,\n    elevation: 1,\n    padding: 5,\n    margin: 5,\n    backgroundColor: \"white\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\",\n    borderRadius: 5\n  }\n});\nexport default Categories;","map":{"version":3,"sources":["/home/theo/Bureau/react/QAM_U/client_Qam/Screens/Admin/Categories.js"],"names":["React","useEffect","useState","EasyButton","baseURL","axios","AsyncStorage","add","Dimensions","get","width","Item","props","styles","item","name","delete","_id","color","fontWeight","Categories","categories","setCategories","categoryName","setCategoryName","token","setToken","getItem","then","res","catch","error","console","log","data","alert","addCategory","category","config","headers","Authorization","post","deleteCategory","id","newCategories","filter","position","height","marginBottom","index","bottomBar","input","text","StyleSheet","create","backgroundColor","padding","flexDirection","alignItems","justifyContent","bottom","left","borderColor","borderWidth","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","margin","borderRadius"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport { \n    View, \n    Text,\n    FlatList,\n    Dimensions,\n    TextInput,\n    StyleSheet \n} from \"react-native\"\nimport EasyButton from \"../../Shared/StyledComponents/EasyButton\"\nimport baseURL from \"../../assets/common/baseUrl\";\nimport axios from \"axios\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { add } from \"react-native-reanimated\";\n\nvar { width } = Dimensions.get(\"window\")\n\nconst Item = (props) => {\n    return (\n        <View style={styles.item}>\n            <Text>{props.item.name}</Text>\n            <EasyButton\n                danger\n                medium\n                onPress={() => props.delete(props.item._id)}\n            >\n                <Text style={{ color: \"white\", fontWeight: \"bold\"}}>Delete</Text>\n            </EasyButton>\n        </View>\n    )\n}\n\nconst Categories = (props) => {\n\n    const [categories, setCategories] = useState([]);\n    const [categoryName, setCategoryName] = useState();\n    const [token, setToken] = useState();\n\n    useEffect(() => {\n        AsyncStorage.getItem(\"jwt\")\n            .then((res) => {\n                setToken(res);\n            })\n            .catch((error) => console.log(error));\n\n        axios\n        .get(`${baseURL}categories`)\n        .then((res) => setCategories(res.data))\n        .catch((error) => alert(\"Error to load categories\"))\n\n        return () => {\n            setCategories();\n            setToken();\n        }\n    }, [])\n\n    const addCategory = () => {\n        const category = {\n            name: categoryName\n        };\n\n        const config = {\n            headers: {\n                Authorization: `Bearer ${token}`,\n            }\n        };\n\n        axios\n        .post(`${baseURL}categories`, category, config)\n        .then((res) => setCategories([...categories, res.data]))\n        .catch((error) => alert(\"Error to load categories\"));\n\n        setCategoryName(\"\");\n    }\n\n    const deleteCategory = (id) => {\n        const config = {\n            headers: {\n                Authorization: `Bearer ${token}`,\n            }\n        };\n\n        axios\n        .delete(`${baseURL}categories/${id}`, config)\n        .then((res) => {\n            const newCategories = categories.filter((item) => item.id !== id);\n            setCategories(newCategories);\n        })\n        .catch((error) => alert(\"Error to load categories\"));\n    }\n\n    return (\n        <View style={{ position: \"relative\", height: \"100%\"}}>\n            <View style={{ marginBottom: 60 }}>\n                <FlatList \n                    data={categories}\n                    renderItem={({ item, index }) => (\n                        <Item item={item} index={index} delete={deleteCategory} />\n                    )}\n                    keyExtractor={(item) => item.id}\n                />\n            </View>\n            <View style={styles.bottomBar}>\n                <View>\n                    <Text>Add Category</Text>\n                </View>\n                <View style={{ width: width / 2.5 }}>\n                    <TextInput \n                        value={categoryName}\n                        style={styles.input}\n                        onChangeText={(text) => setCategoryName(text)}\n                    />\n                </View>\n                <View>\n                    <EasyButton\n                        medium\n                        primary\n                        onPress={() => addCategory()}\n                    >\n                        <Text style={{ color: \"white\", fontWeight: \"bold\"}}>Submit</Text>\n                    </EasyButton>\n                </View>\n            </View>\n        </View>\n    )\n}\n\nconst styles = StyleSheet.create({\n    bottomBar: {\n        backgroundColor: \"white\",\n        width: width,\n        height: 60,\n        padding: 2,\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        position: \"absolute\",\n        bottom: 0,\n        left: 0\n    },\n    input: {\n        height: 40,\n        borderColor: \"gray\",\n        borderWidth: 1\n    },\n    item: {\n        shadowColor: \"#000\",\n        shadowOffset: {\n            width: 0,\n            height: 2,\n        },\n        shadowOpacity: 0.2,\n        shadowRadius: 1,\n        elevation: 1,\n        padding: 5,\n        margin: 5,\n        backgroundColor: \"white\",\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        borderRadius: 5\n    }\n})\n\nexport default Categories;"]},"metadata":{},"sourceType":"module"}